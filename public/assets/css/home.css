/* CSS riêng cho trang Home - sidebar và topbar đã được load từ shared.css */

/* Chart Colors riêng cho Home */
:root {
  --chart-temp-color: #1998b8;
  --chart-temp-bg: rgba(255, 107, 107, 0.1);
  --chart-humi-color: #e983db;
  --chart-humi-bg: rgba(78, 205, 196, 0.1);
  --chart-light-color: #e7702b;
  --chart-light-bg: rgba(69, 183, 209, 0.1);
  
  /* Chart UI */
  --chart-tooltip-bg: rgba(0, 0, 0, 0.8);
  --chart-tooltip-border: rgba(255, 255, 255, 0.2);
  --chart-grid-color: rgba(0, 0, 0, 0.05);
  --chart-text-color: #666;
}

.dashboard{ 
  display:flex; 
  flex-direction:column; 
  gap:20px; 
}

.cards-row{ 
  display:flex; 
  gap:20px; 
  justify-content:center; 
}

/* ===== LIQUID EFFECT CARDS ===== */
.card{ 
  min-width:220px; 
  padding:0;
  height: 100px;
  border-radius:var(--radius); 
  position: relative;
  overflow: hidden;
  box-shadow:0 10px 30px rgba(0,0,0,.12); 
  transform: translateY(0);
  transition: transform .25s ease, box-shadow .25s ease, filter .25s ease;
}

.card:hover{ 
  transform: translateY(-4px);
  box-shadow:0 16px 40px rgba(0,0,0,.18);
  filter: saturate(1.05);
}

/* Liquid container */
.liquid-container {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  width: 100%;
  height: 40%; /* Giảm từ 50% xuống 40% */
  max-height: 80px; /* Giảm từ 100px xuống 80px */
  transition: height 0.8s cubic-bezier(0.4, 0, 0.2, 1), 
              background-color 0.5s ease;
  z-index: 1;
}

/* Wave animation */
.liquid-wave {
  position: absolute;
  top: -15px;  /* Tăng từ -10px lên -15px */
  left: -50%;
  width: 200%;
  height: 25px;  /* Tăng từ 20px lên 25px để sóng cao hơn */
  background: inherit;
  border-radius: 43%;  /* Điều chỉnh độ cong */
  animation: wave 2.5s ease-in-out infinite;  /* Đổi từ linear sang ease-in-out */
}


.liquid-wave:nth-child(2) {
  top: -20px;  /* Tăng từ -15px */
  height: 30px;  /* Sóng thứ 2 cao hơn */
  opacity: 0.6;  /* Tăng từ 0.5 lên 0.6 */
  animation: wave 3.5s ease-in-out infinite reverse;
  border-radius: 47%;
}
.liquid-wave:nth-child(3) {
  top: -12px;
  height: 22px;
  opacity: 0.4;
  animation: wave 3s ease-in-out infinite;
  border-radius: 45%;
  animation-delay: -1s;  /* Lệch pha */
}
@keyframes wave {
  0%, 100% { 
    transform: translateX(0) rotate(0deg); 
  }
  25% {
    transform: translateX(-15%) rotate(0.5deg);
  }
  50% { 
    transform: translateX(-25%) rotate(-0.5deg); 
  }
  75% {
    transform: translateX(-35%) rotate(0.3deg);
  }
}

/* Card content overlay */
.card-content {
  position: relative;
  z-index: 2;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 18px;
  color: #fff;
  text-align: center;
}

.card-emoji{ 
  font-size:22px; 
  margin-bottom:6px; 
  filter: drop-shadow(0 6px 10px rgba(0,0,0,.18));
  position: relative;
  z-index: 3;
}

/* Icon sizes for PNG icons */
.icon-20{ width:20px; height:20px; display:inline-block; }
.icon-24{ width:36px; height:36px; display:inline-block; }

/* Make fan icon larger without affecting others */
.control-pill.device-fan .ctrl-left img{ width:40px; height:40px; }
/* Make AC icon larger without affecting others */
.control-pill.device-ac .ctrl-left img{ width:40px; height:40px; }

.card-title{ 
  font-weight:700;
  position: relative;
  z-index: 3;
  text-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.card-value{ 
  font-size:24px; 
  font-weight:700;
  position: relative;
  z-index: 3;
  text-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

/* Hiệu ứng đổi màu khi nhiệt độ thay đổi */
.card-value.value-up{
  animation: flashUp .9s ease;
}

.card-value.value-down{
  animation: flashDown .9s ease;
}

@keyframes flashUp{
  0%{ color:#ffffff; text-shadow:0 2px 8px rgba(0,0,0,0.3); }
  20%{ color:#7CFF7C; text-shadow:0 0 15px rgba(124,255,124,1), 0 2px 8px rgba(0,0,0,0.3); }
  60%{ color:#cfffce; text-shadow:0 0 10px rgba(124,255,124,.7), 0 2px 8px rgba(0,0,0,0.3); }
  100%{ color:#ffffff; text-shadow:0 2px 8px rgba(0,0,0,0.3); }
}

@keyframes flashDown{
  0%{ color:#ffffff; text-shadow:0 2px 8px rgba(0,0,0,0.3); }
  20%{ color:#FF7C7C; text-shadow:0 0 15px rgba(255,124,124,1), 0 2px 8px rgba(0,0,0,0.3); }
  60%{ color:#ffd0d0; text-shadow:0 0 10px rgba(255,124,124,.7), 0 2px 8px rgba(0,0,0,0.3); }
  100%{ color:#ffffff; text-shadow:0 2px 8px rgba(0,0,0,0.3); }
}

/* Card background colors (for static background) */
.card-temp{ 
  background:linear-gradient(135deg,#dbeafe 0%, #bfdbfe 100%);
}

.card-humi{ 
  background:linear-gradient(135deg,#fae8ff 0%, #f3e8ff 100%);
}

.card-light{ 
  background:linear-gradient(135deg,#fed7aa 0%, #fdba74 100%);
}

.card-rain{
  background:linear-gradient(135deg,#c7f0ff 0%, #87ceeb 100%);
}

/* Liquid colors - default states */
#tempLiquid {
  background: #3b82f6;
}

#lightLiquid {
  background: #f59e0b;
}

#humiLiquid {
  background: #06b6d4;
}

#rainLiquid {
  background: #4dadea;
}

/* Loading state for card values */
.card.loading .card-value{
  position: relative;
  color: rgba(255,255,255,.85);
}

.card.loading .card-value::after{
  content: '';
  position: absolute;
  left: 50%;
  top: calc(100% + 8px);
  width: 84px;
  height: 8px;
  transform: translateX(-50%);
  border-radius: 6px;
  background: linear-gradient(90deg, rgba(255,255,255,.25), rgba(255,255,255,.45), rgba(255,255,255,.25));
  background-size: 200% 100%;
  animation: shimmer 1.2s infinite;
}

@keyframes shimmer{
  0%{ background-position: 200% 0; }
  100%{ background-position: -200% 0; }
}

/* ===== DEVICE ICON ANIMATIONS (Controls) ===== */
.control-pill .ctrl-left{
  font-size:20px;
  transition: transform .2s ease, filter .2s ease;
}

/* Điều hòa (AC) – hiệu ứng thổi gió */
.control-pill.device-ac .ctrl-left{ position: relative; }
.control-pill.device-ac.on .ctrl-left{
  animation: acNudge 1.2s ease-in-out infinite;
  filter: drop-shadow(0 0 12px rgba(100,200,255,.8)) drop-shadow(0 0 6px rgba(255,255,255,.6));
  text-shadow: 0 0 8px rgba(100,200,255,.9);
}
.control-pill.device-ac.on .ctrl-left::after{
  content: '';
  position: absolute;
  left: calc(100% + 6px);
  top: 50%;
  transform: translateY(-50%);
  width: 56px;
  height: 16px;
  pointer-events: none;
  background: repeating-linear-gradient(
    0deg,
    rgba(100,200,255,0) 0 3px,
    rgba(100,200,255,.7) 3px 5px
  );
  filter: blur(0.8px) saturate(1.1);
  opacity: .85;
  border-radius: 8px;
  animation: windSweep 1.2s linear infinite;
}

.control-pill.device-ac.on {
  position: relative;
  overflow: hidden;
}

.control-pill.device-ac.on::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(100,200,255,.15), transparent);
  animation: coolingFlow 2s ease-in-out infinite;
  z-index: 1;
}

@keyframes acNudge{
  0%{ transform: translateX(0); }
  50%{ transform: translateX(2px); }
  100%{ transform: translateX(0); }
}

@keyframes coolingFlow{
  0%{ left: -100%; }
  50%{ left: 100%; }
  100%{ left: 100%; }
}

@keyframes windSweep{
  from{ background-position: 0 0; }
  to{ background-position: 60px 0; }
}

/* Đèn – phát sáng nhịp nhàng */
.control-pill.device-light.on .ctrl-left{
  animation: glow 1.2s ease-in-out infinite alternate;
  text-shadow: 0 0 8px rgba(255,255,200,.9), 0 0 16px rgba(255,200,0,.8), 0 0 24px rgba(255,180,0,.6);
  transform: scale(1.3);
}

.control-pill.device-light .ctrl-left{
  font-size: 24px;
  transition: transform .2s ease, filter .2s ease;
}

@keyframes glow{
  0%{ 
    filter: brightness(1) drop-shadow(0 0 8px rgba(255,220,120,.7)) drop-shadow(0 0 16px rgba(255,200,0,.5));
    text-shadow: 0 0 8px rgba(255,255,200,.9), 0 0 16px rgba(255,200,0,.8), 0 0 24px rgba(255,180,0,.6);
  }
  100%{ 
    filter: brightness(1.4) drop-shadow(0 0 16px rgba(255,220,120,.9)) drop-shadow(0 0 24px rgba(255,200,0,.8));
    text-shadow: 0 0 12px rgba(255,255,200,1), 0 0 24px rgba(255,200,0,.9), 0 0 32px rgba(255,180,0,.7);
  }
}

/* Quạt – xoay cánh quạt */
.control-pill.device-fan.on .ctrl-left{
  animation: fanRotate 1.2s linear infinite;
  filter: drop-shadow(0 0 10px rgba(0,150,255,.7)) drop-shadow(0 0 4px rgba(255,255,255,.5));
  text-shadow: 0 0 6px rgba(0,150,255,.8);
}

@keyframes fanRotate{
  from{ transform: rotate(0deg) scale(1); }
  50%{ transform: rotate(180deg) scale(1.02); }
  to{ transform: rotate(360deg) scale(1); }
}

.table-panel{ 
  width:100%; 
  background:#fff; 
  border-radius:var(--radius); 
  padding:36px; 
  box-shadow:var(--shadow); 
  border:1px solid rgba(0,0,0,0.04); 
}

.content-row{ 
  display:flex; 
  gap:20px; 
}

.chart-panel{ 
  flex:1; 
  background: linear-gradient(135deg, #667eea 0%, #667eea 0%);
  border-radius:var(--radius); 
  padding:10px; 
  box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
  position: relative;
  overflow: hidden;
}

.chart-panel::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border-radius: var(--radius);
  z-index: 1;
}

.chart-panel canvas {
  position: relative;
  z-index: 2;
}

.controls-col{ 
  width:160px; 
  display:flex; 
  flex-direction:column; 
  gap:18px; 
}

.control-pill{ 
  background:#fff; 
  border-radius:var(--radius); 
  padding:12px; 
  display:flex; 
  justify-content:space-between; 
  align-items:center; 
  box-shadow:var(--shadow); 
}

/* Toggle */
.toggle{ 
  display:flex; 
  align-items:center; 
  gap:10px; 
  cursor:pointer; 
  user-select:none; 
}

.toggle-track{ 
  width:52px; 
  height:28px; 
  border-radius:999px; 
  background:#f0c6c6; 
  position:relative; 
  transition:background .2s; 
}

.toggle-thumb{ 
  width:22px; 
  height:22px; 
  border-radius:50%; 
  background:#d9534f; 
  position:absolute; 
  top:3px; 
  left:3px; 
  transition:left .2s, background .2s; 
}

/* Trạng thái ARming (đèn đỏ trước khi bật ON) */
.toggle.arming .toggle-track{
  background:#fcd6d6; /* đỏ nhạt */
}
.toggle.arming .toggle-thumb{
  background:#e53935; /* đỏ */
  animation: redPulse .8s ease-in-out infinite;
}

@keyframes redPulse{
  0%{ box-shadow:0 0 0 0 rgba(229,57,53,0.6); }
  70%{ box-shadow:0 0 0 8px rgba(229,57,53,0); }
  100%{ box-shadow:0 0 0 0 rgba(229,57,53,0); }
}

.toggle.on .toggle-track{ 
  background:#c6f0d2; 
}

.toggle.on .toggle-thumb{ 
  left:27px; 
  background:#49b464; 
}

.toggle-label{ 
  font-weight:700; 
  font-size:14px; 
  color:#555; 
}

.chart-panel canvas{ 
  width:100% !important; 
  height:400px !important; 
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.95);
  padding: 15px;
}

/* Responsive riêng cho Home */
@media (max-width:1200px){
  .content-row{ 
    flex-direction:column; 
  }
  .controls-col{ 
    width:100%; 
    flex-direction:row; 
    justify-content:center; 
  }
}

@media (max-width:1000px){
  .cards-row{ 
    flex-direction:column; 
    align-items:center; 
  }
}